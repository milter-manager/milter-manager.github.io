---
title: Install to Debian (optional)
---

# Install to Debian (optional) --- How to install milter manager related softwares to Debian GNU/Linux

## About this document

This document describes how to install milter managerrelated softwares to Debian GNU/Linux. See Install to Debian for milter manager installinformation and Install for general installinformation.

## Install milter-manager-log-analyzer {#milter-manager-log-analyzer}

milter-manager-log-analyzer is already installed because itis included in milter manager's package. We will configureWeb server to browse graphs generated bymilter-manager-log-analyzer.

There are two ways to view generated graphs; (1) view themvia a Web server at the same host and (2) view them via[Munin](http://munin-monitoring.org/) (and a Webserver) at other host. If we already have Munin orexclusive system monitoring server, Munin is a betterway. Otherwise, a Web server at the same host is a betterway. FIXME

First, a way that a Web server in the same host will beexplained, then a way that using Munin will be explained.

### Way 1: View via a Web server at the same host

#### Install packages

We use Apache as Web server.

<pre>% sudo apt -y install apache2</pre>

#### Configure milter-manager-log-analyzer

milter-manager-log-analyzer generates graphs intomilter-manager user's homedirectory. (/var/lib/milter-manager/) We configure Webserver to publish them athttp://localhost/milter-manager-log/.

<pre>% sudo -u milter-manager mkdir -p ~milter-manager/public_html/log</pre>

We put /etc/apache2/conf.d/milter-manager-log with thefollowing content:

<pre>Alias /milter-manager-log/ /var/lib/milter-manager/public_html/log/</pre>

We need to reload configuration after editing:

<pre>% sudo /etc/init.d/apache2 force-reload</pre>

Now, we can see graphs at http://localhost/milter-manager-log/.

### Way 2: View via Munin at other host {#munin}

Next way is using Munin at other host.

#### Install packages

We install milter-manager-munin-plugins package thatprovides statistics data collected bymilter-manager-log-analyzer to Munin:

<pre>% sudo apt -y install milter-manager-munin-plugins</pre>

<em>NOTE: We need to use databases created bymilter-manager-log-analyzer bundled with milter manager1.5.0 or later to provide statistics data to Munin. If wehave databases that are created by oldermilter-manager-log-analyzer, we need to remove~milter-manager/public_html/log/. If we remove thedirectory, milter-manager-log-analyzer re-creates statisticsdatabases 5 minutes later.</em>

#### Configure munin-node

Munin-node should accept accesses from Munin server. IfMunin server is 192.168.1.254, we need to append thefollowing lines to /etc/munin/munin-node.conf:

/etc/munin/munin-node.conf:

<pre>allow ^192\.168\.1\.254$</pre>

We need to restart munin-node to apply our configuration:

<pre>% sudo /usr/sbin/service munin-node restart</pre>

#### Configure Munin server

Works in this section at system monitor server. We assumethat system monitor server works on Debian GNU/Linux.

First, we install munin and Apache:

<pre>monitoring-server% sudo apt -y install munin apache2</pre>

We add our mail server that works munin-node to munin'smonitor target. We assume that mail server has the followingconfiguration:

<dl>
<dt>Host name</dt>
<dd>mail.example.com</dd>
<dt>IP address</dt>
<dd>192.168.1.2</dd></dl>

We need to add the following lines to /etc/munin/munin.confto add the mail server:

/etc/munin/munin.conf:

<pre>[mail.example.com]
    address 192.168.1.2
    use_node_name yes</pre>

We will be able to view graphs athttp://monitoring-server/munin/ 5 minutes later.

## Conclusion

We can confirm milter's effect visually bymilter-manager-log-analyzer. If we use Postfix as MTA, wecan compare with[Mailgraph](http://mailgraph.schweikert.ch/)'s graphsto confirm milter's effect. We can use graphs generated bymilter-manager-log-analyzer effectively when we are tryingout a milter.


